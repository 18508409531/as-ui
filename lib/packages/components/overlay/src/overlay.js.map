{"version":3,"file":"overlay.js","sources":["../../../../../../../packages/components/overlay/src/overlay.ts"],"sourcesContent":["import { defineComponent, createVNode, renderSlot, h } from 'vue'\nimport type { PropType, ExtractPropTypes, CSSProperties } from 'vue'\nimport { useNamespace } from '@as-ui/utils/bem'\nimport { useSameTarget } from './utils'\n\nexport const definePropType = <T>(val: any): PropType<T> => val\n\nexport const overlayProps = {\n  mask: {\n    type: Boolean,\n    default: true\n  },\n  customMaskEvent: {\n    type: Boolean,\n    default: false\n  },\n  overlayClass: {\n    type: definePropType<string | string[] | Record<string, boolean>>([\n      String,\n      Array,\n      Object\n    ])\n  },\n  zIndex: {\n    type: definePropType<string | number>([String, Number])\n  }\n} as const\n\nexport type OverlayProps = ExtractPropTypes<typeof overlayProps>\n\nexport const overlayEmits = {\n  click: (evt: MouseEvent) => evt instanceof MouseEvent\n}\n\nexport type OverlayEmits = typeof overlayEmits\n\nexport default defineComponent({\n  name: 'AsOverlay',\n  props: overlayProps,\n  emits: overlayEmits,\n  setup(props, { slots, emit }) {\n    const ns = useNamespace('overlay')\n    const onMaskClick = (e: MouseEvent) => {\n      emit('click', e)\n    }\n    const { onClick, onMousedown, onMouseup } = useSameTarget(\n      props.customMaskEvent ? undefined : onMaskClick\n    )\n    // init here\n    return () => {\n      // when the vnode meets the same structure but with different change trigger\n      // it will not automatically update, thus we simply use h function to manage updating\n      return props.mask\n        ? createVNode(\n            'div',\n            {\n              class: [ns.b(), props.overlayClass],\n              style: {\n                zIndex: props.zIndex\n              },\n              onClick,\n              onMousedown,\n              onMouseup\n            },\n            [renderSlot(slots, 'default')],\n            4 | 2 | 8,\n            ['onClick', 'onMouseup', 'onMousedown']\n          )\n        : h(\n            'div',\n            {\n              class: props.overlayClass,\n              style: {\n                zIndex: props.zIndex,\n                position: 'fixed',\n                top: '0px',\n                right: '0px',\n                bottom: '0px',\n                left: '0px'\n              } as CSSProperties\n            },\n            [renderSlot(slots, 'default')]\n          )\n    }\n  }\n})\n"],"names":["defineComponent","useNamespace","useSameTarget","createVNode","renderSlot","h"],"mappings":";;;;;;;;AAKa,MAAA,cAAA,GAAiB,CAAI,GAA0B,KAAA,IAAA;AAErD,MAAM,YAAe,GAAA;AAAA,EAC1B,IAAM,EAAA;AAAA,IACJ,IAAM,EAAA,OAAA;AAAA,IACN,OAAS,EAAA,IAAA;AAAA,GACX;AAAA,EACA,eAAiB,EAAA;AAAA,IACf,IAAM,EAAA,OAAA;AAAA,IACN,OAAS,EAAA,KAAA;AAAA,GACX;AAAA,EACA,YAAc,EAAA;AAAA,IACZ,MAAM,cAA4D,CAAA;AAAA,MAChE,MAAA;AAAA,MACA,KAAA;AAAA,MACA,MAAA;AAAA,KACD,CAAA;AAAA,GACH;AAAA,EACA,MAAQ,EAAA;AAAA,IACN,IAAM,EAAA,cAAA,CAAgC,CAAC,MAAA,EAAQ,MAAM,CAAC,CAAA;AAAA,GACxD;AACF,EAAA;AAIO,MAAM,YAAe,GAAA;AAAA,EAC1B,KAAA,EAAO,CAAC,GAAA,KAAoB,GAAe,YAAA,UAAA;AAC7C,EAAA;AAIA,cAAeA,mBAAgB,CAAA;AAAA,EAC7B,IAAM,EAAA,WAAA;AAAA,EACN,KAAO,EAAA,YAAA;AAAA,EACP,KAAO,EAAA,YAAA;AAAA,EACP,KAAM,CAAA,KAAA,EAAO,EAAE,KAAA,EAAO,MAAQ,EAAA;AAC5B,IAAM,MAAA,EAAA,GAAKC,iBAAa,SAAS,CAAA,CAAA;AACjC,IAAM,MAAA,WAAA,GAAc,CAAC,CAAkB,KAAA;AACrC,MAAA,IAAA,CAAK,SAAS,CAAC,CAAA,CAAA;AAAA,KACjB,CAAA;AACA,IAAA,MAAM,EAAE,OAAA,EAAS,WAAa,EAAA,SAAA,EAAc,GAAAC,mBAAA;AAAA,MAC1C,KAAA,CAAM,kBAAkB,KAAY,CAAA,GAAA,WAAA;AAAA,KACtC,CAAA;AAEA,IAAA,OAAO,MAAM;AAGX,MAAA,OAAO,MAAM,IACT,GAAAC,eAAA;AAAA,QACE,KAAA;AAAA,QACA;AAAA,UACE,OAAO,CAAC,EAAA,CAAG,CAAE,EAAA,EAAG,MAAM,YAAY,CAAA;AAAA,UAClC,KAAO,EAAA;AAAA,YACL,QAAQ,KAAM,CAAA,MAAA;AAAA,WAChB;AAAA,UACA,OAAA;AAAA,UACA,WAAA;AAAA,UACA,SAAA;AAAA,SACF;AAAA,QACA,CAACC,cAAA,CAAW,KAAO,EAAA,SAAS,CAAC,CAAA;AAAA,QAC7B,IAAI,CAAI,GAAA,CAAA;AAAA,QACR,CAAC,SAAW,EAAA,WAAA,EAAa,aAAa,CAAA;AAAA,OAExC,GAAAC,KAAA;AAAA,QACE,KAAA;AAAA,QACA;AAAA,UACE,OAAO,KAAM,CAAA,YAAA;AAAA,UACb,KAAO,EAAA;AAAA,YACL,QAAQ,KAAM,CAAA,MAAA;AAAA,YACd,QAAU,EAAA,OAAA;AAAA,YACV,GAAK,EAAA,KAAA;AAAA,YACL,KAAO,EAAA,KAAA;AAAA,YACP,MAAQ,EAAA,KAAA;AAAA,YACR,IAAM,EAAA,KAAA;AAAA,WACR;AAAA,SACF;AAAA,QACA,CAACD,cAAA,CAAW,KAAO,EAAA,SAAS,CAAC,CAAA;AAAA,OAC/B,CAAA;AAAA,KACN,CAAA;AAAA,GACF;AACF,CAAC,CAAA;;;;;;;"}