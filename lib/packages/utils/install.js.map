{"version":3,"file":"install.js","sources":["../../../../../packages/utils/install.ts"],"sourcesContent":["import type { App, Plugin, AppContext } from 'vue'\n\n// 类型必须导出否则无法生成.d.ts文件\nexport type SFCWithInstall<T> = T & Plugin\n\nexport type SFCInstallWithContext<T> = SFCWithInstall<T> & {\n  _context: AppContext | null\n}\n\nexport const withInstall = <T>(comp: T) => {\n  // 提供全局注册的安装函数\n  ;(comp as SFCWithInstall<T>).install = function (app: App) {\n    app.component((comp as any).name, comp as any)\n  }\n  return comp as SFCWithInstall<T>\n}\n\nexport const withInstallFunction = <T>(fn: T, name: string) => {\n  ;(fn as SFCWithInstall<T>).install = (app: App) => {\n    ;(fn as SFCInstallWithContext<T>)._context = app._context\n    app.config.globalProperties[name] = fn\n  }\n  return fn as SFCInstallWithContext<T>\n}\n"],"names":[],"mappings":";;AASa,MAAA,WAAA,GAAc,CAAI,IAAY,KAAA;AAEzC,EAAA,CAAA;AAAC,EAAC,IAAA,CAA2B,OAAU,GAAA,SAAU,GAAU,EAAA;AACzD,IAAI,GAAA,CAAA,SAAA,CAAW,IAAa,CAAA,IAAA,EAAM,IAAW,CAAA,CAAA;AAAA,GAC/C,CAAA;AACA,EAAO,OAAA,IAAA,CAAA;AACT,EAAA;AAEa,MAAA,mBAAA,GAAsB,CAAI,EAAA,EAAO,IAAiB,KAAA;AAC7D,EAAA,CAAA;AAAC,EAAC,EAAA,CAAyB,OAAU,GAAA,CAAC,GAAa,KAAA;AACjD,IAAA,CAAA;AAAC,IAAC,EAAA,CAAgC,WAAW,GAAI,CAAA,QAAA,CAAA;AACjD,IAAI,GAAA,CAAA,MAAA,CAAO,iBAAiB,IAAQ,CAAA,GAAA,EAAA,CAAA;AAAA,GACtC,CAAA;AACA,EAAO,OAAA,EAAA,CAAA;AACT;;;;;"}